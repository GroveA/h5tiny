!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=18)}([function(t,e,i){var n=i(1),s=function(t,e,i,s,r){this.game=t,this.x=void 0!==e?e:0,this.y=void 0!==i?i:0,this.position=new Tiny.Point(1,1,this.game),this.width=void 0!==s?s:0,this.height=void 0!==r?r:0,this.rotation=0,this.alpha=1,this.visible=!0,this.pivot={x:.5,y:.5},this.anchor={x:n.left,y:n.top},this.smoothing=!0,this.stretch={x:!1,y:!1},this.scale=new Tiny.Point(1,1,this.game),this.offset={left:0,top:0,right:0,bottom:0},this.parent=void 0};s.prototype.getBounds=function(){var t=this.determinePositionInCanvas(),e=this.determineDimensionsInCanvas();return{x:t.x,y:t.y,width:e.width,height:e.height}},s.prototype.getParentBounds=function(){if(void 0===this.parent)return{x:0,y:0,width:this.game.width,height:this.game.height};if(this.parent instanceof s)return this.parent.getBounds();throw new Error("DisplayObject.parent should always be an instance of DisplayObject")},s.prototype.determinePositionInCanvas=function(){var t={x:"number"==typeof this.x?this.x:0,y:"number"==typeof this.y?this.y:0};if(this.stretch.x||this.stretch.y){var e=this.getParentBounds(),i=this.getOffsetInCanvas();this.stretch.x&&(t.x=e.x+i.left),this.stretch.y&&(t.y=e.y+i.top)}return t=this.adjustPositionForAnchor(t.x,t.y),t=this.adjustPositionForPivot(t.x,t.y)},s.prototype.determineDimensionsInCanvas=function(){var t={width:"number"==typeof this.width?this.width:0,height:"number"==typeof this.height?this.height:0};if(this.stretch.x||this.stretch.y){var e=this.getParentBounds(),i=this.getOffsetInCanvas();this.stretch.x&&(t.width=e.width-i.left-i.right),this.stretch.y&&(t.height=e.height-i.top-i.bottom)}return t},s.prototype.adjustPositionForAnchor=function(t,e){var i=this.getParentBounds();return this.stretch.x||(this.anchor.x===n.left?t=i.x+t:this.anchor.x===n.right?t=i.x+i.width-t:this.anchor.x===n.center&&(t=i.x+.5*i.width+t)),this.stretch.y||(this.anchor.y===n.top?e=i.y+e:this.anchor.y===n.bottom?e=i.y+i.height-e:this.anchor.y===n.center&&(e=i.y+.5*i.height+e)),{x:t,y:e}},s.prototype.getOffsetInCanvas=function(){for(var t,e={left:this.offset.left,top:this.offset.top,right:this.offset.right,bottom:this.offset.bottom},i=Object.keys(e),n=i.length,s=0;s<n;s++){var r=i[s],h=e[r];if("number"!=typeof h){t=t||this.getParentBounds();var o=parseFloat(h.match(/^([0-9\.]+)%$/)[1]);e[r]=o/100*t.width}}return e},s.prototype.adjustPositionForPivot=function(t,e){return t-=this.width*this.pivot.x,e-=this.height*this.pivot.y,{x:t,y:e}},s.prototype.shouldReceiveEvents=function(){return this.visible},s.prototype.onClick=function(t){this.game.addEventListener("click",t,this)},s.prototype.render=function(t){if(this.visible){t.save();var e,i=this.getBounds();if((this.rotation||1!=this.scale.x||1!=this.scale.y)&&(e=this.adjustPositionForPivot(0,0)),this.rotation){var n=Math.PI/180*this.rotation,s=i.x-e.x,r=i.y-e.y;t.translate(s,r),t.rotate(n),t.translate(-s,-r)}if(1!=this.scale.x||1!=this.scale.y){var h=(-i.x+e.x)*(this.scale.x-1),o=(-i.y+e.y)*(this.scale.y-1);t.translate(h,o),t.scale(this.scale.x,this.scale.y)}t.globalAlpha=this.alpha,void 0!==t.mozImageSmoothingEnabled&&(t.mozImageSmoothingEnabled=this.smoothing),void 0!==t.webkitImageSmoothingEnabled&&(t.webkitImageSmoothingEnabled=this.smoothing),void 0!==t.msImageSmoothingEnabled&&(t.msImageSmoothingEnabled=this.smoothing),void 0!==t.imageSmoothingEnabled&&(t.imageSmoothingEnabled=this.smoothing),this.draw(t,i.x,i.y,i.width,i.height),t.restore()}},s.draw=function(t,e,i,n,s){},Object.defineProperty(s.prototype,"_proxied_visible",{get:function(){return!(this.parent&&this.parent!==this&&!this.parent.visible)&&this._visible},set:function(t){return this._visible=t}}),t.exports=s},function(t,e){t.exports={center:1,left:2,right:3,top:4,bottom:5}},function(t,e,i){var n=i(0),s=function(t,e,i,s,r,h,o){this.parseSheet(h,o),this.scale=void 0!==i?i:1,this.setText(e);var s=void 0!==s?s:0,r=void 0!==r?r:0,a=this.calculateDimensions();n.bind(this)(t,s,r,a.width,a.height),this.pivot.x=0,this.pivot.y=0};s.prototype=Object.create(n.prototype),s.prototype.setText=function(t){if(this.text!==t){this.text=void 0!==t?t.toString():"",this.characters=this.text.split("");var e=this.calculateDimensions();this.width=e.width,this.height=e.height}},s.prototype.parseSheet=function(t,e){if(void 0===t&&!this.sheet)throw new Error("Sheet image path missing when creating sprite from sheet");if(void 0===e&&!this.sheetData)throw new Error("Sheet data path missing when creating sprite from sheet");if(!t&&this.sheet||(this.sheet=AssetLoader.getAssetById(t)),!e&&this.sheetData||(this.sheetData=AssetLoader.getAssetById(e)),"object"!=typeof this.sheetData)throw new Error("Invalid sheet data "+e+" -- not an object");this.characterData={};for(var i=Object.keys(this.sheetData),n=i.length,s=0;s<n;s++){var r=i[s],h=this.sheetData[r];h.uv0[0]=Math.min(1,Math.max(0,h.uv0[0])),h.uv0[1]=Math.min(1,Math.max(0,h.uv0[1])),h.uv1[0]=Math.min(1,Math.max(0,h.uv1[0])),h.uv1[1]=Math.min(1,Math.max(0,h.uv1[1])),this.characterData[r]={x:Math.round(h.uv0[0]*this.sheet.width),y:Math.round((1-h.uv0[1])*this.sheet.height),width:Math.round((h.uv1[0]-h.uv0[0])*this.sheet.width),height:Math.round((h.uv0[1]-h.uv1[1])*this.sheet.height)};var o=this.characterData[r];o.width=Math.max(1e-5,o.width),o.height=Math.max(1e-5,o.height)}},s.prototype.calculateDimensions=function(){for(var t={width:0,height:0},e=this.characters.length,i=0;i<e;i++){var n=this.characters[i];this.characterData[n]||(n=Object.keys(this.characterData)[0]);var s=this.characterData[n];t.width+=s?s.width:0,t.height=Math.max(t.height,s?s.height:0)}return t.width*=this.scale,t.height*=this.scale,t},s.prototype.draw=function(t,e,i){for(var n=this.characters.length,s=0;s<n;s++){var r=this.characters[s],h=this.drawCharacter(t,r,e,i);e=h.x+h.width,i=h.y}},s.prototype.drawCharacter=function(t,e,i,n){var s=this.characterData[e],r=!1;void 0===s&&(s={width:6,height:6},r=!0);var h=s.width*this.scale,o=s.height*this.scale;return r||t.drawImage(this.sheet,s.x,s.y,s.width,s.height,i,n,h,o),{x:i,y:n,width:h,height:o}},t.exports=s},function(t,e,i){var n=i(0),s=function(t,e,i,s,r){this.color=e;var i=void 0!==i?i:0,s=void 0!==s?s:0;this._radius=void 0!==r?r:1,n.bind(this)(t,i,s,2*r,2*r)};s.prototype=Object.create(n.prototype),Object.defineProperty(s.prototype,"radius",{get:function(){return this._radius},set:function(t){return this.width=2*t,this.height=2*t,this._radius=t}}),s.prototype.draw=function(t,e,i,n,s){t.fillStyle=this.color,t.beginPath(),t.arc(e+n/2,i+s/2,this.radius,0,2*Math.PI),t.fill()},t.exports=s},function(t,e,i){var n=i(0),s=function(t,e,i,s,r,h,o){this.color=e,this.bg_color=i,this.value=0,this.circleStart=0;var s=void 0!==s?s:0,r=void 0!==r?r:0;this._radius=void 0!==h?h:1,this.line_width=void 0!==o?o:1,n.bind(this)(t,s,r,2*h,2*h)};s.prototype=Object.create(n.prototype),Object.defineProperty(s.prototype,"radius",{get:function(){return this._radius},set:function(t){return this.width=this.height=2*t+this.line_width,this._radius=t}}),s.prototype.draw=function(t,e,i,n,s){var r=-1.57+this.circleStart;t.beginPath(),t.arc(e+n/2,i+s/2,this.radius,r,4*Math.PI,!1),t.strokeStyle=this.bg_color,t.lineWidth=this.line_width,t.stroke(),t.beginPath(),t.strokeStyle=this.color,t.lineWidth=this.line_width,t.arc(e+n/2,i+s/2,this.radius,r,r+this.value/50*Math.PI,!1),t.stroke()},t.exports=s},function(t,e,i){var n=i(0),s=function(t,e,i,s,r,h){var e=void 0!==e?e:0,i=void 0!==i?i:0;this.textAlign="center",this.textBaseline="middle",this._fontWeight="normal",this._text=void 0!==s?s:"",this._size=void 0!==r?r:12,this.font="undefined"!=typeof font?font:"Arial",this._color=void 0!==h?h:"#000000",this._lineHeight=1,this.strokeThickness=1,this.stroke=void 0,this._canvas=document.createElement("canvas"),this.__ui=t,this.setText(),n.bind(this)(t,e,i,this.width,this.height)};s.prototype=Object.create(n.prototype),["fontWeight","text","size","color","lineHeight"].forEach(function(t){var e="_"+t;Object.defineProperty(s.prototype,t,{get:function(){return this[e]},set:function(t){this[e]!=t&&(this.__ui._should_redraw=!0),this[e]=t,this.setText()}})}),s.prototype.setText=function(){var t=this.size+"px "+this.font;"normal"!==this._fontWeight&&(t=this._fontWeight+" "+t);var e=this._canvas.getContext("2d");e.clearRect(0,0,this._canvas.width,this._canvas.height),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.font=t;var i=e.measureText(this._text);this.width=this._canvas.width=i.width+20,this.height=this._canvas.height=1.5*this.size+10,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.font=t,e.fillStyle=this.color,e.miterLimit=2,e.fillText(this._text,this._canvas.width/2,this._canvas.height/2)},s.prototype.draw=function(t,e,i,n,s){t.drawImage(this._canvas,e,i,n,s)},t.exports=s},function(t,e,i){var n=i(0),s=function(t,e,i,s,r,h){this.color=e;var i=void 0!==i?i:0,s=void 0!==s?s:0,r=void 0!==r?r:1,h=void 0!==h?h:1;n.bind(this)(t,i,s,r,h)};s.prototype=Object.create(n.prototype),s.prototype.draw=function(t,e,i,n,s){t.fillStyle=this.color,t.fillRect(e,i,n,s)},t.exports=s},function(t,e,i){var n=i(0),s=function(t,e,i,s,r,h,o){this.color=e;var i=void 0!==i?i:0,s=void 0!==s?s:0,r=void 0!==r?r:1,h=void 0!==h?h:1;this.radius=void 0!==o?o:1,n.bind(this)(t,i,s,r,h)};s.prototype=Object.create(n.prototype),s.prototype.draw=function(t,e,i,n,s){t.strokeStyle=this.color,t.fillStyle=this.color,t.lineJoin="round",t.lineWidth=this.radius,t.strokeRect(e+this.radius/2,i+this.radius/2,n-this.radius,s-this.radius),t.fillRect(e+this.radius/2,i+this.radius/2,n-this.radius,s-this.radius)},t.exports=s},function(t,e,i){var n=i(0),s=function(t,e,i,s,r,h,o,a){this.setAssetPath(e,o,a);var i=void 0!==i?i:0,s=void 0!==s?s:0,r=void 0!==r?r:null,h=void 0!==h?h:null;this.asset&&(r=null!==r?r:this.asset.width,h=null!==h?h:this.asset.height),n.bind(this)(t,i,s,r,h)};s.prototype=Object.create(n.prototype),s.prototype.draw=function(t,e,i,n,s){this.sheet&&this.sheetImageData||t.drawImage(this.asset,e,i,n,s)},s.prototype.setAssetPath=function(t,e,i){this.assetPath=t,void 0!==e||this.sheet||(this.asset=AssetLoader.getAssetById(t),this.sheet=null)},t.exports=s},function(t,e,i){var n=i(0),s=function(t,e,i,s,r,h,o){this.textAlign="left",this.textBaseline="alphabetic",this.fontWeight="normal",this.text=void 0!==e?e:"",this.size=void 0!==i?i:12,this.font=void 0!==s?s:"Arial",this.color=void 0!==r?r:"#000000",this.lineHeight=1,this.strokeThickness=1,this.stroke=void 0;var h=void 0!==h?h:0,o=void 0!==o?o:0;n.bind(this)(t,h,o)};s.prototype=Object.create(n.prototype),s.prototype.draw=function(t,e,i){t.font=this.size+"px "+this.font,"normal"!==this.fontWeight&&(t.font=this.fontWeight+" "+t.font),t.miterLimit=2,t.fillStyle=this.color,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeThickness);var n=this.text.split("\n"),s=0;"center"===this.textVerticalAlign?s=n.length/2-.5:"bottom"===this.textVerticalAlign&&(s=n.length-1);for(var r=0;r<n.length;r++){var h=n[r],o=i+(r-s)*(this.size*this.lineHeight);this.stroke&&t.strokeText(h,e,o),t.fillText(h,e,o)}},t.exports=s},function(t,e){Tiny.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.type=Tiny.MATRIX},Tiny.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Tiny.Matrix.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var e=this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},Tiny.Matrix.prototype.apply=function(t,e){e=e||new Tiny.Point;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},Tiny.Matrix.prototype.applyInverse=function(t,e){e=e||new Tiny.Point;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},Tiny.Matrix.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},Tiny.Matrix.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},Tiny.Matrix.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,r=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=r*e-this.ty*i,this.ty=r*i+this.ty*e,this},Tiny.Matrix.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},Tiny.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Tiny.identityMatrix=new Tiny.Matrix},function(t,e){Tiny.Point=function(t,e){this.x=t||0,this.y=e||0},Tiny.Point.prototype={set:function(t,e){return this.x=t||0,this.y=e||(0!==e?this.x:0),this},setTo:function(t,e){this.set(t,e)}}},function(t,e){Tiny.Rectangle=function(t,e,i,n){t=t||0,e=e||0,i=i||0,n=n||0,this.x=t,this.y=e,this.width=i,this.height=n},Tiny.Rectangle.prototype={offset:function(t,e){return this.x+=t,this.y+=e,this},offsetPoint:function(t){return this.offset(t.x,t.y)},setTo:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},scale:function(t,e){return void 0===e&&(e=t),this.width*=t,this.height*=e,this},centerOn:function(t,e){return this.centerX=t,this.centerY=e,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},copyFrom:function(t){return this.setTo(t.x,t.y,t.width,t.height)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},inflate:function(t,e){return Tiny.Rectangle.inflate(this,t,e)},size:function(t){return Tiny.Rectangle.size(this,t)},clone:function(t){return Tiny.Rectangle.clone(this,t)},contains:function(t,e){return Tiny.Rectangle.contains(this,t,e)},containsRect:function(t){return Tiny.Rectangle.containsRect(t,this)},equals:function(t){return Tiny.Rectangle.equals(this,t)},intersection:function(t,e){return Tiny.Rectangle.intersection(this,t,e)},intersects:function(t){return Tiny.Rectangle.intersects(this,t)},intersectsRaw:function(t,e,i,n,s){return Tiny.Rectangle.intersectsRaw(this,t,e,i,n,s)},union:function(t,e){return Tiny.Rectangle.union(this,t,e)},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},Object.defineProperty(Tiny.Rectangle.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(Tiny.Rectangle.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(Tiny.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"bottomRight",{get:function(){return new Tiny.Point(this.right,this.bottom)},set:function(t){this.right=t.x,this.bottom=t.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"left",{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}}),Object.defineProperty(Tiny.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}}),Object.defineProperty(Tiny.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(Tiny.Rectangle.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(Tiny.Rectangle.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(t){this.x=t-this.halfWidth}}),Object.defineProperty(Tiny.Rectangle.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(t){this.y=t-this.halfHeight}}),Object.defineProperty(Tiny.Rectangle.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width}}),Object.defineProperty(Tiny.Rectangle.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height}}),Object.defineProperty(Tiny.Rectangle.prototype,"top",{get:function(){return this.y},set:function(t){t>=this.bottom?(this.height=0,this.y=t):this.height=this.bottom-t}}),Object.defineProperty(Tiny.Rectangle.prototype,"topLeft",{get:function(){return new Tiny.Point(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"topRight",{get:function(){return new Tiny.Point(this.x+this.width,this.y)},set:function(t){this.right=t.x,this.y=t.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(t){!0===t&&this.setTo(0,0,0,0)}}),Tiny.Rectangle.prototype.constructor=Tiny.Rectangle,Tiny.Rectangle.inflate=function(t,e,i){return t.x-=e,t.width+=2*e,t.y-=i,t.height+=2*i,t},Tiny.Rectangle.inflatePoint=function(t,e){return Tiny.Rectangle.inflate(t,e.x,e.y)},Tiny.Rectangle.size=function(t,e){return void 0===e||null===e?e=new Tiny.Point(t.width,t.height):e.setTo(t.width,t.height),e},Tiny.Rectangle.clone=function(t,e){return void 0===e||null===e?e=new Tiny.Rectangle(t.x,t.y,t.width,t.height):e.setTo(t.x,t.y,t.width,t.height),e},Tiny.Rectangle.contains=function(t,e,i){return!(t.width<=0||t.height<=0)&&(e>=t.x&&e<t.right&&i>=t.y&&i<t.bottom)},Tiny.Rectangle.containsRaw=function(t,e,i,n,s,r){return s>=t&&s<t+i&&r>=e&&r<e+n},Tiny.Rectangle.containsPoint=function(t,e){return Tiny.Rectangle.contains(t,e.x,e.y)},Tiny.Rectangle.containsRect=function(t,e){return!(t.volume>e.volume)&&(t.x>=e.x&&t.y>=e.y&&t.right<e.right&&t.bottom<e.bottom)},Tiny.Rectangle.equals=function(t,e){return t.x==e.x&&t.y==e.y&&t.width==e.width&&t.height==e.height},Tiny.Rectangle.sameDimensions=function(t,e){return t.width===e.width&&t.height===e.height},Tiny.Rectangle.intersection=function(t,e,i){return void 0===i&&(i=new Tiny.Rectangle),Tiny.Rectangle.intersects(t,e)&&(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y),i},Tiny.Rectangle.intersects=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0)&&!(t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)},Tiny.Rectangle.intersectsRaw=function(t,e,i,n,s,r){return void 0===r&&(r=0),!(e>t.right+r||i<t.left-r||n>t.bottom+r||s<t.top-r)},Tiny.Rectangle.union=function(t,e,i){return void 0===i&&(i=new Tiny.Rectangle),i.setTo(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.right,e.right)-Math.min(t.left,e.left),Math.max(t.bottom,e.bottom)-Math.min(t.top,e.top))},Tiny.Rectangle.aabb=function(t,e){void 0===e&&(e=new Tiny.Rectangle);var i=Number.MIN_VALUE,n=Number.MAX_VALUE,s=Number.MIN_VALUE,r=Number.MAX_VALUE;return t.forEach(function(t){t.x>i&&(i=t.x),t.x<n&&(n=t.x),t.y>s&&(s=t.y),t.y<r&&(r=t.y)}),e.setTo(n,r,i-n,s-r),e},Tiny.EmptyRectangle=new Tiny.Rectangle(0,0,0,0)},function(t,e,i){var n=i(1),s=i(2),r=i(6),h=i(8),o=i(9),a=i(7),c=i(3),u=i(4),d=i(5),l=i(22).isFirefox,p=i(20),y=i(23),f=i(21),g=["x","y","width","height","rotation","alpha","visible","pivot","anchor","smoothing","stretch","offset","scale","parent","textAlign","assetPath","color","left","right","up","down","ActiveInvoke","value"],x=function(t,e){g.forEach(function(i){var n="_proxied_"+i;t[n]=t[i],Object.defineProperty(t,i,{set:function(s){t[i]!==s&&(e._should_redraw=!0),t[n]=s},get:function(){return t[n]}})})},T=function(t,e,i,n,s){this.displayObjects=[],this.eventListeners={click:[]},this.clearRect=null,this.parentNode=i||document.body,this.canvas=document.createElement("canvas"),this.height=e||720,this.width=t||430,this.context=this.canvas.getContext("2d"),this.stage=new T.Stage,this.textures={},this.renderer=new T.CanvasRenderer(t,e,{view:this.canvas,autoResize:!0}),this._should_redraw=!0,s=s||{},this._preload_cb=s.preload||function(){},this._create_cb=s.create||function(){},this._update_cb=s.update||function(){},this.load=new p(this),f(this),this.addCanvasToDom(),this.resize(window.innerWidth,window.innerHeight),window.addEventListener("touchend",this.clickHandler.bind(this)),l?window.addEventListener("click",this.clickHandler.bind(this)):window.addEventListener("mousedown",this.clickHandler.bind(this)),this._self_raf=n,this._self_raf&&(this._raf=new y(this)),this.preload()};T.anchors=n,T.prototype.addCanvasToDom=function(){this.parentNode.appendChild(this.canvas),this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.style.transformOrigin="0% 0%",this.canvas.style.perspective="1000px"},T.prototype.resize=function(t,e){this.renderer.resize(t,e)},T.prototype.render=function(){this.renderer.render(this.stage)},T.prototype.preload=function(){this._preload_cb(),this.load.start(this.create)},T.prototype.create=function(){this._create_cb(),this._self_raf&&this._raf.start()};var m=0,v=0;T.prototype.update=function(t){v=t-m,this._update_cb(t,v),T._tween_enabled&&TWEEN.update(),this.stage.updateTransform(),this.render(),m=t},T.prototype.pause=function(){this._self_raf&&(this._raf.isRunning=!1)},T.prototype.resume=function(){this._self_raf&&(this._raf.isRunning=!0)},T.prototype.destroy=function(){T._tween_enabled&&TWEEN.removeAll(),this._self_raf&&this._raf.stop()},T.prototype.createSpriteFromSheet=function(t,e,i,n,s,r,o){var a=new h(this,t,n,s,r,o,e,i);return this.displayObjects.push(a),x(a,this),a},T.prototype.createImageText=function(t,e,i,n,s){var r=new d(this,t,e,i,n,s);return this.displayObjects.push(r),x(r,this),r},T.prototype.createRectangle=function(t,e,i,n,s){var h=new r(this,t,e,i,n,s);return this.displayObjects.push(h),x(h,this),h},T.prototype.createCircularProgress=function(t,e,i,n,s,r){var h=new u(this,t,e,i,n,s,r);return this.displayObjects.push(h),x(h,this),h},T.prototype.createRoundRectangle=function(t,e,i,n,s,r){var h=new a(this,t,e,i,n,s,r);return this.displayObjects.push(h),x(h,this),h},T.prototype.createCircle=function(t,e,i,n){var s=new c(this,t,e,i,n);return this.displayObjects.push(s),x(s,this),s},T.prototype.createText=function(t,e,i,n,s){var r=new o(this,t,e,i,n,s);return this.displayObjects.push(r),x(r,this),r},T.prototype.createBitmapText=function(t,e,i,n,r,h){var o=new s(this,t,e,i,n,r,h);return this.displayObjects.push(o),x(o,this),o},T.prototype.addEventListener=function(t,e,i){this.eventListeners[t].push({callback:e,displayObject:i})},T.prototype.clickHandler=function(t){var e=null;if("undefined"!=typeof TouchEvent&&t instanceof TouchEvent?(this.listeningToTouchEvents=!0,t.touches.length>0?e={x:t.touches[0].pageX,y:t.touches[0].pageY}:t.pageX&&t.pageY?e={x:t.pageX,y:t.pageY}:this.listeningToTouchEvents=!1):e={x:t.pageX,y:t.pageY},!(this.listeningToTouchEvents&&t instanceof MouseEvent||null===e)){e=this.windowToUISpace(e.x,e.y);var i=[];this.eventListeners.click.forEach(function(t){var n=t.displayObject;if(n.shouldReceiveEvents()){var s=n.getBounds();T.isInBoundingBox(e.x,e.y,s.x,s.y,s.width,s.height)&&i.push(t.callback)}}),i.forEach(function(t){t()})}},T.prototype.windowToUISpace=function(t,e){var i=this.canvas.getBoundingClientRect(),n=this.height/i.height;return{x:(t-i.left)*n,y:(e-i.top)*n}},T.prototype.moveToFront=function(t){var e=this.displayObjects.indexOf(t);e>-1&&this.displayObjects.splice(e,1),this.displayObjects.push(t)},T.isInBoundingBox=function(t,e,i,n,s,r){return t>=i&&t<=i+s&&e>=n&&e<=n+r},t.exports=T,window.Tiny=T},function(t,e){Tiny.DisplayObject=function(){this.position=new Tiny.Point(0,0),this.scale=new Tiny.Point(1,1),this.transformCallback=null,this.transformCallbackContext=null,this.pivot=new Tiny.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this.worldTransform=new Tiny.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new Tiny.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},Tiny.DisplayObject.prototype.constructor=Tiny.DisplayObject,Tiny.DisplayObject.prototype.destroy=function(){if(this.children){for(var t=this.children.length;t--;)this.children[t].destroy();this.children=[]}this.transformCallback=null,this.transformCallbackContext=null,this.hitArea=null,this.parent=null,this.stage=null,this.worldTransform=null,this.filterArea=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.renderable=!1,this._destroyCachedSprite()},Object.defineProperty(Tiny.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(Tiny.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(Tiny.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var e=[],i=0;i<t.length;i++)for(var n=t[i].passes,s=0;s<n.length;s++)e.push(n[s]);this._filterBlock={target:this,filterPasses:e}}this._filters=t}}),Object.defineProperty(Tiny.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),Tiny.DisplayObject.prototype.updateTransform=function(){if(this.parent){var t,e,i,n,s,r,h=this.parent.worldTransform,o=this.worldTransform;this.rotation%Tiny.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,i=-this._sr*this.scale.y,n=this._cr*this.scale.y,s=this.position.x,r=this.position.y,(this.pivot.x||this.pivot.y)&&(s-=this.pivot.x*t+this.pivot.y*i,r-=this.pivot.x*e+this.pivot.y*n),o.a=t*h.a+e*h.c,o.b=t*h.b+e*h.d,o.c=i*h.a+n*h.c,o.d=i*h.b+n*h.d,o.tx=s*h.a+r*h.c+h.tx,o.ty=s*h.b+r*h.d+h.ty):(t=this.scale.x,n=this.scale.y,s=this.position.x-this.pivot.x*t,r=this.position.y-this.pivot.y*n,o.a=t*h.a,o.b=t*h.b,o.c=n*h.c,o.d=n*h.d,o.tx=s*h.a+r*h.c+h.tx,o.ty=s*h.b+r*h.d+h.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this.transformCallback&&this.transformCallback.call(this.transformCallbackContext,o,h)}},Tiny.DisplayObject.prototype.displayObjectUpdateTransform=Tiny.DisplayObject.prototype.updateTransform,Tiny.DisplayObject.prototype.getBounds=function(t){return t=t,Tiny.EmptyRectangle},Tiny.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(Tiny.identityMatrix)},Tiny.DisplayObject.prototype.setStageReference=function(t){this.stage=t},Tiny.DisplayObject.prototype.preUpdate=function(){},Tiny.DisplayObject.prototype.generateTexture=function(t,e,i){var n=this.getLocalBounds(),s=new PIXI.RenderTexture(0|n.width,0|n.height,i,e,t);return Tiny.DisplayObject._tempMatrix.tx=-n.x,Tiny.DisplayObject._tempMatrix.ty=-n.y,s.render(this,Tiny.DisplayObject._tempMatrix),s},Tiny.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},Tiny.DisplayObject.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},Tiny.DisplayObject.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},Tiny.DisplayObject.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},Tiny.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var e=new PIXI.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new PIXI.Sprite(e),this._cachedSprite.worldTransform=this.worldTransform}var i=this._filters;this._filters=null,this._cachedSprite.filters=i,Tiny.DisplayObject._tempMatrix.tx=-t.x,Tiny.DisplayObject._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,Tiny.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this._filters=i,this._cacheAsBitmap=!0},Tiny.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},Tiny.DisplayObject.prototype._renderCanvas=function(t){t=t},Object.defineProperty(Tiny.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(Tiny.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}})},function(t,e){Tiny.DisplayObjectContainer=function(){Tiny.DisplayObject.call(this),this.children=[]},Tiny.DisplayObjectContainer.prototype=Object.create(Tiny.DisplayObject.prototype),Tiny.DisplayObjectContainer.prototype.constructor=Tiny.DisplayObjectContainer,Object.defineProperty(Tiny.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}}),Object.defineProperty(Tiny.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}),Tiny.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},Tiny.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.stage&&t.setStageReference(this.stage),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},Tiny.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);if(i<0||n<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[i]=e,this.children[n]=t}},Tiny.DisplayObjectContainer.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},Tiny.DisplayObjectContainer.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);this.children.splice(i,1),this.children.splice(e,0,t)},Tiny.DisplayObjectContainer.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[t]},Tiny.DisplayObjectContainer.prototype.removeChild=function(t){var e=this.children.indexOf(t);if(-1!==e)return this.removeChildAt(e)},Tiny.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1),e},Tiny.DisplayObjectContainer.prototype.removeChildren=function(t,e){var i=t||0,n="number"==typeof e?e:this.children.length,s=n-i;if(s>0&&s<=n){for(var r=this.children.splice(i,s),h=0;h<r.length;h++){var o=r[h];this.stage&&o.removeStageReference(),o.parent=void 0}return r}if(0===s&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},Tiny.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,e=this.children.length;t<e;t++)this.children[t].updateTransform()},Tiny.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=Tiny.DisplayObjectContainer.prototype.updateTransform,Tiny.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return Tiny.EmptyRectangle;for(var t,e,i,n=1/0,s=1/0,r=-1/0,h=-1/0,o=!1,a=0,c=this.children.length;a<c;a++){this.children[a].visible&&(o=!0,t=this.children[a].getBounds(),n=n<t.x?n:t.x,s=s<t.y?s:t.y,e=t.width+t.x,i=t.height+t.y,r=r>e?r:e,h=h>i?h:i)}if(!o)return Tiny.EmptyRectangle;var u=this._bounds;return u.x=n,u.y=s,u.width=r-n,u.height=h-s,u},Tiny.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=Tiny.identityMatrix;for(var e=0,i=this.children.length;e<i;e++)this.children[e].updateTransform();var n=this.getBounds();return this.worldTransform=t,n},Tiny.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t;for(var e=0;e<this.children.length;e++)this.children[e].setStageReference(t)},Tiny.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0;t<this.children.length;t++)this.children[t].removeStageReference();this.stage=null},Tiny.DisplayObjectContainer.prototype._renderCanvas=function(t){if(!1!==this.visible&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);this._mask&&t.maskManager.pushMask(this._mask,t);for(var e=0;e<this.children.length;e++)this.children[e]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}},function(t,e){Tiny.Stage=function(){Tiny.DisplayObjectContainer.call(this),this.worldTransform=new Tiny.Matrix,this.stage=this},Tiny.Stage.prototype=Object.create(Tiny.DisplayObjectContainer.prototype),Tiny.Stage.prototype.constructor=Tiny.Stage,Tiny.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform()}},function(t,e){Date.now||(Date.now=function(){return(new Date).getTime()})},function(t,e,i){i(17),i(13),i(30),i(11),i(10),i(12),i(28),i(29),i(25),i(14),i(15),i(16),i(27),i(26)},function(t,e){var i={};i.maxConcurrency=1/0,i.assetProgress={},i.loadedAssets={},i.queue=[],i.queueIdx=0,i.loader={},i.load=function(t){i.asyncQueue(i.queue,function(){i.queue=[],i.assetProgress={},"function"==typeof t&&t()})},i.queueNext=function(){i.queueIdx++},i.loadingCallback=function(){},i.done=function(t,e){i.loadedAssets[t]=e,i.updateAssetProgress(t,1,1),i.loadingCallback(t,e)},i.push=function(t){void 0===i.queue[i.queueIdx]&&(i.queue[i.queueIdx]=[]),i.queue[i.queueIdx].push(t)},i.progressListener=null,i.getProgress=function(){if(i.queue.length<=0)return 1;var t=0;Object.keys(i.assetProgress).forEach(function(e){t+=i.assetProgress[e]});var e=0;return i.queue.forEach(function(t){e+=t.length}),t/e},i.updateAssetProgress=function(t,e,n){if(!(1===i.assetProgress[t]||n<e||n<=0)){var s=1;void 0!==e&&void 0!==n&&(s=e/n),i.assetProgress[t]=s,"function"==typeof i.progressListener&&i.progressListener(i.getProgress())}},i.getAssetById=function(t){return i.loadedAssets[t]},i.asyncQueue=function(t,e){if(0==t.length)return e();var n=t.slice(),s=function(){var t=n.shift();i.asyncCollection(t,function(){n.length>0?s():e()})};s()},i.asyncCollection=function(t,e){var t=t.slice(),n=Math.min(i.maxConcurrency,t.length),s=function(i){i(function(){n--,t.length>0?(n++,s(t.shift())):0===n&&e()})};t.splice(0,i.maxConcurrency).forEach(s)},i.add=function(t,e){var n=e.split(".").pop();if("png"===n)i.add.image(t,e);else if("json"===n)i.add.json(t,e);else{if("css"!==n)throw new Error("Unsupported file-type ("+n+") passed to AssetLoader.add.");i.add.css(t,e)}},i.add.image=function(t,e){i.push(function(n){var s=new Image;s.onload=function(){i.done(t,s),i.updateAssetProgress(e,1,1),n()},s.src=e})},i.add.webFont=function(t,e,n){i.add.css(t,n);var s=document.createElement("div");s.innerText="Loading "+e,s.style.fontFamily=e,s.style.width=0,s.style.height=0,s.style.overflow="hidden",document.body.appendChild(s)},i.add.json=function(t,e){i.push(function(n){s(e,function(e){i.done(t,e),n()})})},i.add.script=function(t,e){i.push(function(n){i.loader.script(e,function(){i.done(t,e),n()})})},i.loader.script=function(t,e,i){var n=document.createElement("script");n.src=e,n.id=t,n.onload=i,document.head.appendChild(n)},i.add.css=function(t,e){i.push(function(n){var s=document.createElement("link");s.type="text/css",s.rel="stylesheet",s.href=e,s.onload=function(){i.done(t,s),n()},document.head.appendChild(s)})};var n=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0);var s=function(){4===n.readyState&&(e(n.response||n.responseText),n.onload=null,n.onreadystatechange=null)};n.onload=s,n.onreadystatechange=s,n.onprogress=function(e){i.updateAssetProgress(t,e.loaded,e.total)},n.onerror=function(t){throw new Error("Error during XHR: "+t)},n.send()},s=function(t,e){n(t,function(t){e(JSON.parse(t))})};t.exports=i,window.AssetLoader=i},function(t,e,i){i(19);var n=function(t){this.game=t,AssetLoader.loadingCallback=function(e,i){var n=new Tiny.BaseTexture(i);t.textures[e]=new Tiny.Texture(n)},Object.defineProperty(this.game,"cache",{get:function(){return AssetLoader.loadedAssets}})};n.prototype={image:function(t,e){AssetLoader.add.image(t,e)},start:function(t){AssetLoader.load(function(){t.call(this)}.bind(this.game))}},t.exports=n},function(t,e,i){function n(t){Tiny.prototype.add={_sprite:function(e,i,n,s,r){var h=new Tiny.Sprite(t.textures[e]);return t.stage.addChild(h),h},sprite:function(e,i,n,s,r){var o=new h(t,e,i,n,s,r);return t.displayObjects.push(o),p(o,t),o},spritesheet:function(e,i,n,s,r,o,a){var c=new h(t,e,s,r,o,a,i,n);return t.displayObjects.push(c),p(c,t),c},bitmaptext:function(e,i,n,r,h,o){var a=new s(t,e,i,n,r,h,o);return t.displayObjects.push(a),p(a,t),a},text:function(e,i,n,s,r){var h=new d(t,e,i,n,s,r);return t.displayObjects.push(h),p(h,t),h},_text:function(e,i,n,s,r){var h=new o(t,e,i,n,s,r);return t.displayObjects.push(h),p(h,t),h},shape:{rect:function(e,i,n,s,h){var o=new r(t,e,i,n,s,h);return t.displayObjects.push(o),p(o,t),o},roundRect:function(e,i,n,s,r,h){var o=new a(t,e,i,n,s,r,h);return t.displayObjects.push(o),p(o,t),o},circle:function(e,i,n,s){var r=new c(t,e,i,n,s);return t.displayObjects.push(r),p(r,t),r}},progress:{circular:function(e,i,n,s,r,h){var o=new u(t,e,i,n,s,r,h);return t.displayObjects.push(o),p(o,t),o}},chart:{}}}var s=i(2),r=i(6),h=i(8),o=i(9),a=i(7),c=i(3),u=i(4),d=i(5),l=["x","y","width","height","rotation","alpha","visible","pivot","anchor","smoothing","stretch","offset","scale","parent","textAlign","assetPath","color","left","right","up","down","ActiveInvoke","value"],p=function(t,e){l.forEach(function(i){var n="_proxied_"+i;t[n]=t[i],Object.defineProperty(t,i,{set:function(s){t[i]!==s&&(e.shouldReDraw=!0),t[n]=s},get:function(){return t[n]}})})};t.exports=n},function(t,e){var i=function(){return/firefox/i.test(navigator.userAgent)}();t.exports={isFirefox:i}},function(t,e){var i=function(t,e){void 0===e&&(e=!1),this.game=t,this.isRunning=!1,this.forceSetTimeOut=e;for(var i=["ms","moz","webkit","o"],n=0;n<i.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[i[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[n]+"CancelAnimationFrame"]||window[i[n]+"CancelRequestAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null};i.prototype={start:function(){this.isRunning=!0;var t=this;!window.requestAnimationFrame||this.forceSetTimeOut?(this._isSetTimeOut=!0,this._onLoop=function(){return t.updateSetTimeout()},this._timeOutID=window.setTimeout(this._onLoop,0)):(this._isSetTimeOut=!1,this._onLoop=function(e){return t.updateRAF(e)},this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateRAF:function(t){this.isRunning&&(this.game.update(Math.floor(t)),this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateSetTimeout:function(){this.isRunning&&(this.game.update(Date.now()),this._timeOutID=window.setTimeout(this._onLoop,this.game.time.timeToCall))},stop:function(){this._isSetTimeOut?clearTimeout(this._timeOutID):window.cancelAnimationFrame(this._timeOutID),this.isRunning=!1},isSetTimeOut:function(){return this._isSetTimeOut},isRAF:function(){return!1===this._isSetTimeOut}},t.exports=i},,function(t,e){Tiny.CanvasMaskManager=function(){},Tiny.CanvasMaskManager.prototype.constructor=Tiny.CanvasMaskManager,Tiny.CanvasMaskManager.prototype.pushMask=function(t,e){var i=e.context;i.save();var n=t.alpha,s=t.worldTransform,r=e.resolution;i.setTransform(s.a*r,s.b*r,s.c*r,s.d*r,s.tx*r,s.ty*r),Tiny.CanvasGraphics.renderGraphicsMask(t,i),i.clip(),t.worldAlpha=n},Tiny.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()}},function(t,e){Tiny.CanvasRenderer=function(t,e,i){i=i||{},this.resolution=void 0!=i.resolution?i.resolution:1,this.clearBeforeRender=void 0==i.clearBeforeRender||i.clearBeforeRender,this.transparent=void 0!=i.transparent&&i.transparent,this.autoResize=i.autoResize||!1,this.width=t||800,this.height=e||600,this.width*=this.resolution,this.height*=this.resolution,this.view=i.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new Tiny.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:0,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(t,e),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},Tiny.CanvasRenderer.prototype.constructor=Tiny.CanvasRenderer,Tiny.CanvasRenderer.prototype.render=function(t){t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=Tiny.blendModes.NORMAL,this.context.globalCompositeOperation=Tiny.blendModesCanvas[Tiny.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t)},Tiny.CanvasRenderer.prototype.destroy=function(t){void 0===t&&(t=!0),t&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},Tiny.CanvasRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},Tiny.CanvasRenderer.prototype.renderDisplayObject=function(t,e){this.renderSession.context=e||this.context,this.renderSession.resolution=this.resolution,t._renderCanvas(this.renderSession)},Tiny.CanvasRenderer.prototype.mapBlendModes=function(){Tiny.blendModesCanvas||(Tiny.blendModesCanvas=[],Tiny.blendModesCanvas[Tiny.blendModes.NORMAL]="source-over")}},function(t,e){Tiny.Sprite=function(t){Tiny.DisplayObjectContainer.call(this),this.anchor=new Tiny.Point,this.texture=t,this._width=0,this._height=0,this.tint=16777215,this.blendMode=Tiny.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded&&this.onTextureUpdate(),this.renderable=!0},Tiny.Sprite.prototype=Object.create(Tiny.DisplayObjectContainer.prototype),Tiny.Sprite.prototype.constructor=Tiny.Sprite,Object.defineProperty(Tiny.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Tiny.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Tiny.Sprite.prototype.setTexture=function(t){this.texture=t,this.cachedTint=16777215},Tiny.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},Tiny.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,i=this.texture.frame.height,n=e*(1-this.anchor.x),s=e*-this.anchor.x,r=i*(1-this.anchor.y),h=i*-this.anchor.y,o=t||this.worldTransform,a=o.a,c=o.b,u=o.c,d=o.d,l=o.tx,p=o.ty,y=-1/0,f=-1/0,g=1/0,x=1/0;if(0===c&&0===u)a<0&&(a*=-1),d<0&&(d*=-1),g=a*s+l,y=a*n+l,x=d*h+p,f=d*r+p;else{var T=a*s+u*h+l,m=d*h+c*s+p,v=a*n+u*h+l,w=d*h+c*n+p,b=a*n+u*r+l,_=d*r+c*n+p,O=a*s+u*r+l,C=d*r+c*s+p;g=T<g?T:g,g=v<g?v:g,g=b<g?b:g,g=O<g?O:g,x=m<x?m:x,x=w<x?w:x,x=_<x?_:x,x=C<x?C:x,y=T>y?T:y,y=v>y?v:y,y=b>y?b:y,y=O>y?O:y,f=m>f?m:f,f=w>f?w:f,f=_>f?_:f,f=C>f?C:f}var j=this._bounds;return j.x=g,j.width=y-g,j.y=x,j.height=f-x,this._currentBounds=j,j},Tiny.Sprite.prototype._renderCanvas=function(t){if(!(!1===this.visible||0===this.alpha||!1===this.renderable||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=Tiny.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var e=this.texture.baseTexture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha,t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=0===t.scaleMode);var i=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,n=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;t.roundPixels?(t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0),i|=0,n|=0):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,i/e,n/e,this.texture.crop.width/e,this.texture.crop.height/e)}for(var s=0;s<this.children.length;s++)this.children[s]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}},function(t,e){Tiny.BaseTextureCache={},Tiny.BaseTextureCacheIdGenerator=0,Tiny.BaseTexture=function(t,e){this.resolution=1,this.width=100,this.height=100,this.scaleMode=e||Tiny.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this._UID=Tiny._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],t&&((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height&&(this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty()),this.imageUrl=null,this._powerOf2=!1)},Tiny.BaseTexture.prototype.constructor=Tiny.BaseTexture,Tiny.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete Tiny.BaseTextureCache[this.imageUrl],delete Tiny.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete Tiny.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},Tiny.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},Tiny.BaseTexture.prototype.dirty=function(){for(var t=0;t<this._glTextures.length;t++)this._dirty[t]=!0},Tiny.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var t=this._glTextures.length-1;t>=0;t--){var e=this._glTextures[t],i=Tiny.glContexts[t];i&&e&&i.deleteTexture(e)}this._glTextures.length=0,this.dirty()},Tiny.BaseTexture.fromImage=function(t,e,i){var n=Tiny.BaseTextureCache[t];if(void 0===e&&-1===t.indexOf("data:")&&(e=!0),!n){var s=new Image;e&&(s.crossOrigin=""),s.src=t,n=new Tiny.BaseTexture(s,i),n.imageUrl=t,Tiny.BaseTextureCache[t]=n,-1!==t.indexOf(Tiny.RETINA_PREFIX+".")&&(n.resolution=2)}return n},Tiny.BaseTexture.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+Tiny.TextureCacheIdGenerator++);var i=Tiny.BaseTextureCache[t._pixiId];return i||(i=new Tiny.BaseTexture(t,e),Tiny.BaseTextureCache[t._pixiId]=i),i}},function(t,e){Tiny.TextureCache={},Tiny.FrameCache={},Tiny.TextureSilentFail=!1,Tiny.TextureCacheIdGenerator=0,Tiny.Texture=function(t,e,i,n){this.noFrame=!1,e||(this.noFrame=!0,e=new Tiny.Rectangle(0,0,1,1)),t instanceof Tiny.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=n,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=i||new Tiny.Rectangle(0,0,1,1),t.hasLoaded&&(this.noFrame&&(e=new Tiny.Rectangle(0,0,t.width,t.height)),this.setFrame(e))},Tiny.Texture.prototype.constructor=Tiny.Texture,Tiny.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;this.noFrame&&(this.frame=new Tiny.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame)},Tiny.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},Tiny.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)){if(!Tiny.TextureSilentFail)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);return void(this.valid=!1)}this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},Tiny.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new Tiny.TextureUvs);var t=this.crop,e=this.baseTexture.width,i=this.baseTexture.height;this._uvs.x0=t.x/e,this._uvs.y0=t.y/i,this._uvs.x1=(t.x+t.width)/e,this._uvs.y1=t.y/i,this._uvs.x2=(t.x+t.width)/e,this._uvs.y2=(t.y+t.height)/i,this._uvs.x3=t.x/e,this._uvs.y3=(t.y+t.height)/i},Tiny.Texture.fromImage=function(t,e,i){var n=Tiny.TextureCache[t];return n||(n=new Tiny.Texture(Tiny.BaseTexture.fromImage(t,e,i)),Tiny.TextureCache[t]=n),n},Tiny.Texture.fromFrame=function(t){var e=Tiny.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return e},Tiny.Texture.fromCanvas=function(t,e){var i=Tiny.BaseTexture.fromCanvas(t,e);return new Tiny.Texture(i)},Tiny.Texture.addTextureToCache=function(t,e){Tiny.TextureCache[e]=t},Tiny.Texture.removeTextureFromCache=function(t){var e=Tiny.TextureCache[t];return delete Tiny.TextureCache[t],delete Tiny.BaseTextureCache[t],e},Tiny.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}},function(t,e){Tiny.PI_2=2*Math.PI,Tiny._UID=0,Tiny.RETINA_PREFIX="none",Tiny.blendModes={NORMAL:0},Tiny.scaleModes={DEFAULT:0}}]);